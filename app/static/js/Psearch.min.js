
let search_block=document.getElementById(`search_block`);search_block.addEventListener(`submit`,a=>{a.preventDefault()});let input=search_block.querySelector(`input`),select=search_block.querySelector(`select`);function redirectClientPage(a){window.location=`/clients/profile/`+a.target.dataset.id,input.value=''}input.addEventListener(`keyup`,()=>{const b=document.querySelector(`.custom-seaarch-result`);if(0<input.value.length){const c={searchBy:select.value,data:input.value};let d=new FormData;d.append(`data`,c),fetch('/api/search',{method:'POST',body:JSON.stringify(c),headers:new Headers({Accept:'application/json','Content-Type':'application/json'})}).then(f=>f.json()).then(f=>{if(b.innerHTML=` `,b.classList.remove(`search-hide`),0<f.length)f.forEach(g=>{let h=document.createElement(`LI`);h.textContent=g.fname+` `+g.lname,h.dataset.id=g._id,h.addEventListener(`click`,redirectClientPage),b.appendChild(h)});else{let g=document.createElement(`LI`);g.textContent=`Client not found`,b.appendChild(g)}})}else b.classList.add(`search-hide`)});
